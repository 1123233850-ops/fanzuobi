<!DOCTYPE html>
<html>
    <head>
        <!-- 引入样式表 -->
        <link href="style.css" rel="stylesheet" type="text/css" />
		<!-- 引入jQuery库 -->
		<script src="nui://game/ui/jquery.js" type="text/javascript"></script>
		<style>
      /* 容器默认隐藏 */
      .container {visibility: hidden;}
		</style>
	</head>
  <body id="body">
    <!-- 主容器 -->
    <div class="container">
      <div class="content">
        <!-- 点火开关 -->
        <div class="slot"><img id="ignition" src="img/ignition.png" /></div>
        <!-- 炸弹舱门 -->
        <div class="slot"><img id="bombbay" src="img/bombbay.png" /></div>
        <!-- 前引擎盖 -->
        <div class="slot"><img id="frontHood" src="img/frontHood.png" /></div>
        <!-- 后备箱 -->
        <div class="slot"><img id="rearHood" src="img/rearHood.png" /></div>
        <!-- 后备箱2 -->
        <div class="slot"><img id="rearHood2" src="img/rearHood2.png" /></div>
        <!-- 车内灯 -->
        <div class="slot"><img id="interiorLight" src="img/interiorLight.png" /></div>
        <!-- 前左车窗 -->
        <div class="slot"><img id="windowFrontLeft" src="img/windowFrontLeft.png" /></div>
        <!-- 前左车门 -->
        <div class="slot"><img id="doorFrontLeft" src="img/doorFrontLeft.png" /></div>
        <!-- 前左座位 -->
        <div class="slot"><img id="seatFrontLeft" src="img/seatFrontLeft.png" /></div>
        <!-- 前右座位 -->
        <div class="slot"><img id="seatFrontRight" src="img/seatFrontLeft.png" /></div>
        <!-- 前右车门 -->
        <div class="slot"><img id="doorFrontRight" src="img/doorFrontRight.png" /></div>
        <!-- 前右车窗 -->
        <div class="slot"><img id="windowFrontRight" src="img/windowFrontRight.png" /></div>
        <!-- 后左车窗 -->
        <div class="slot"><img id="windowRearLeft" src="img/windowRearLeft.png" /></div>
        <!-- 后左车门 -->
        <div class="slot"><img id="doorRearLeft" src="img/doorRearLeft.png" /></div>
        <!-- 后左座位 -->
        <div class="slot"><img id="seatRearLeft" src="img/seatFrontLeft.png" /></div>
        <!-- 后右座位 -->
        <div class="slot"><img id="seatRearRight" src="img/seatFrontLeft.png" /></div>
        <!-- 后右车门 -->
        <div class="slot"><img id="doorRearRight" src="img/doorRearRight.png" /></div>
        <!-- 后右车窗 -->
        <div class="slot"><img id="windowRearRight" src="img/windowRearRight.png" /></div>
      </div>
    </div>

    <script type="text/javascript">
      $(function() {
        /* 监听来自游戏的消息，控制UI显示/隐藏 */
        window.addEventListener('message', function(event) {
          // 打开菜单
          if (event.data.type == "openGeneral"){
            $('.container').css('visibility', 'visible')
          } 
          // 关闭菜单
          else if (event.data.type == "closeAll"){
            $('.container').css('visibility', 'hidden')
          }
        });
      });
  
      // 按下ESC键关闭菜单
      document.onkeyup = function(data){
        if (data.which == 27){  // 27 = ESC键
          $('.container').css('visibility', 'hidden')
          // 通知游戏端失去焦点
          $.post('http://vehcontrol/NUIFocusOff', JSON.stringify({}));
        }
      }

      // 点火开关点击事件
      $('#ignition').click(function(){
        $.post('http://vehcontrol/ignition', JSON.stringify({}));
      })
      
      // 前引擎盖点击事件
      $('#frontHood').click(function(){
        $.post('http://vehcontrol/doors', JSON.stringify({
          door: 4  // 引擎盖ID
        }));
      })
      
      // 后备箱点击事件
      $('#rearHood').click(function(){
        $.post('http://vehcontrol/doors', JSON.stringify({
          door: 5  // 后备箱ID
        }));
      })
      
      // 后备箱2点击事件
      $('#rearHood2').click(function(){
        $.post('http://vehcontrol/doors', JSON.stringify({
          door: 6  // 后备箱2 ID
        }));
      })
      
      // 车内灯点击事件
      $('#interiorLight').click(function(){
        $.post('http://vehcontrol/interiorLight', JSON.stringify({}));
      })
      
      // 炸弹舱门点击事件
      $('#bombbay').click(function(){
        $.post('http://vehcontrol/bombbay', JSON.stringify({}));
      })
      
      // 前左车窗点击事件
      $('#windowFrontLeft').click(function(){
        $.post('http://vehcontrol/windows', JSON.stringify({
          window: 0,  // 前左车窗ID
          door: 0     // 前左车门ID
        }));
      })
      
      // 前左车门点击事件
      $('#doorFrontLeft').click(function(){
        $.post('http://vehcontrol/doors', JSON.stringify({
          door: 0  // 前左车门ID
        }));
      })
      
      // 前左座位(驾驶座)点击事件
      $('#seatFrontLeft').click(function(){
        $.post('http://vehcontrol/seatchange', JSON.stringify({
          seat: -1  // 驾驶座ID
        }));
      })
      
      // 前右座位(副驾驶)点击事件
      $('#seatFrontRight').click(function(){
        $.post('http://vehcontrol/seatchange', JSON.stringify({
          seat: 0,  // 副驾驶ID
        }));
      })
      
      // 前右车门点击事件
      $('#doorFrontRight').click(function(){
        $.post('http://vehcontrol/doors', JSON.stringify({
          door: 1  // 前右车门ID
        }));
      })
      
      // 前右车窗点击事件
      $('#windowFrontRight').click(function(){
        $.post('http://vehcontrol/windows', JSON.stringify({
          window: 1,  // 前右车窗ID
          door: 1      // 前右车门ID
        }));
      })
      
      // 后左车窗点击事件
      $('#windowRearLeft').click(function(){
        $.post('http://vehcontrol/windows', JSON.stringify({
          window: 2,  // 后左车窗ID
          door: 2      // 后左车门ID
        }));
      })
      
      // 后左车门点击事件
      $('#doorRearLeft').click(function(){
        $.post('http://vehcontrol/doors', JSON.stringify({
          door: 2  // 后左车门ID
        }));
      })
      
      // 后左座位点击事件
      $('#seatRearLeft').click(function(){
        $.post('http://vehcontrol/seatchange', JSON.stringify({
          seat: 1,  // 后左座位ID
        }));
      })
      
      // 后右座位点击事件
      $('#seatRearRight').click(function(){
        $.post('http://vehcontrol/seatchange', JSON.stringify({
          seat: 2,  // 后右座位ID
        }));
      })
      
      // 后右车门点击事件
      $('#doorRearRight').click(function(){
        $.post('http://vehcontrol/doors', JSON.stringify({
          door: 3  // 后右车门ID
        }));
      })
      
      // 后右车窗点击事件
      $('#windowRearRight').click(function(){
        $.post('http://vehcontrol/windows', JSON.stringify({
          window: 3,  // 后右车窗ID
          door: 3      // 后右车门ID
        }));
      })
    </script>
  </body>
</html>